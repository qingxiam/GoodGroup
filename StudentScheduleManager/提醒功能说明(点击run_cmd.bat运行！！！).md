# 学生个人课表管理系统 - 提醒功能说明

## 功能概述

本系统提供了完整的课程提醒功能，包括：

1. **弹窗提醒** - 上课前30分钟显示桌面弹窗提醒
2. **邮件提醒** - 发送邮件到用户邮箱
3. **站内消息** - 在系统内部发送消息提醒

## 功能特性

### 1. 自动提醒
- 系统会每分钟检查一次即将开始的课程
- 当课程在30分钟内开始时，自动触发提醒
- 支持多种提醒方式同时使用

### 2. 邮件提醒
- 支持配置SMTP服务器（默认QQ邮箱）
- 可自定义发件人邮箱和密码/授权码
- 发送格式化的课程提醒邮件

### 3. 站内消息
- 实时发送站内消息
- 支持消息管理（查看、标记已读、删除）
- 提供消息中心界面

## 使用方法

### 配置邮件提醒

1. 启动应用程序
2. 点击菜单栏的"工具" → "提醒设置"
3. 在邮件服务器设置中配置：
   - **SMTP服务器**：smtp.qq.com（QQ邮箱）
   - **SMTP端口**：587
   - **发件人邮箱**：您的QQ邮箱地址
   - **邮箱密码/授权码**：QQ邮箱的授权码（不是登录密码）

4. 点击"测试邮件发送"验证配置
5. 点击"保存设置"保存配置

### 测试提醒功能

1. 点击菜单栏的"工具" → "测试提醒"
2. 选择要测试的提醒方式：
   - **弹窗提醒**：显示桌面弹窗
   - **邮件提醒**：发送测试邮件
   - **站内消息**：发送测试站内消息
   - **全部测试**：同时测试多种方式

### 查看站内消息

1. 切换到"消息中心"选项卡
2. 在左侧列表中查看所有消息
3. 点击消息查看详细内容
4. 使用工具栏按钮管理消息：
   - **刷新**：刷新消息列表
   - **标记已读**：标记选中的消息为已读
   - **删除**：删除选中的消息
   - **清空所有**：清空所有消息

## 技术实现

### 核心类

1. **ReminderService** - 提醒服务主类
   - 负责定时检查和触发提醒
   - 集成邮件和站内消息服务

2. **EmailService** - 邮件服务类
   - 配置SMTP服务器
   - 发送课程提醒邮件
   - 发送测试邮件

3. **MessageService** - 站内消息服务类
   - 管理站内消息的发送和存储
   - 提供消息查询和管理功能

4. **ReminderSettingsDialog** - 提醒设置对话框
   - 提供邮件服务器配置界面
   - 支持测试邮件和站内消息功能

5. **MessageCenterPanel** - 消息中心面板
   - 显示和管理站内消息
   - 提供消息操作界面

### 提醒流程

1. **启动阶段**：用户登录后自动启动提醒服务
2. **检查阶段**：每分钟检查一次即将开始的课程
3. **触发阶段**：发现30分钟内开始的课程时触发提醒
4. **发送阶段**：同时发送弹窗、邮件和站内消息

## 配置说明

### QQ邮箱配置

1. 登录QQ邮箱网页版
2. 进入"设置" → "账户"
3. 开启"POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务"
4. 获取授权码（不是QQ密码）
5. 在系统中使用授权码作为密码

### 其他邮箱配置

- **Gmail**：smtp.gmail.com:587
- **163邮箱**：smtp.163.com:25
- **126邮箱**：smtp.126.com:25

## 测试方法

### 运行测试

```bash
# 编译项目
mvn clean compile

# 运行提醒功能测试
mvn test -Dtest=ReminderServiceTest

# 启动应用程序
mvn exec:java
```

### 手动测试

1. 添加一个今天即将开始的课程
2. 等待系统自动提醒或使用测试功能
3. 检查各种提醒方式是否正常工作

## 注意事项

1. **邮件配置**：首次使用需要配置邮件服务器
2. **网络连接**：邮件发送需要网络连接
3. **时间设置**：确保系统时间正确
4. **权限设置**：某些系统可能需要允许应用程序发送邮件

## 故障排除

### 邮件发送失败
- 检查SMTP服务器配置是否正确
- 确认邮箱密码/授权码是否正确
- 检查网络连接是否正常

### 提醒不工作
- 确认课程已启用提醒功能
- 检查系统时间是否正确
- 查看控制台日志信息

### 站内消息不显示
- 切换到"消息中心"选项卡
- 点击"刷新"按钮
- 检查是否有未读消息

## 更新日志

### v1.0
- 实现基础提醒功能
- 支持弹窗、邮件、站内消息三种提醒方式
- 提供完整的配置和测试界面 